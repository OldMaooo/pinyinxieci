/**
 * 版本信息
 * 每次重要更新时更新版本号
 */
const APP_VERSION = {
    version: '1.3.85',
    buildDate: '2025-11-30',
    changelog: [
        'v1.3.85 - 修复任务拆分：确保每个拆分后的任务只包含自己的wordIds，不引用母任务；单独练习在开始时保存为任务；已完成清单UI优化：取消进度条，只显示分数、对几题、错几题，日期直接展示文本；做题页改进：10秒间隔改成3秒，修复重试机制和暂停按钮失效问题；任务清单支持批量选择和删除；批量操作支持待排期任务；修复清空所有任务时真正清空；拆题弹窗阈值改为25个字',
        'v1.3.84 - 修复任务清单删除功能：使用自定义模态框替代prompt()；修复首页已选择字数统计不正确的问题；移除批量操作工具栏中的管理模式按钮',
        'v1.3.83 - 修复首页管理模式按钮无反应问题：在showPage中重新绑定事件；实现「只练错题」功能：打开开关时只提取勾选单元中的错题练习，右上角统计数字相应改变',
        'v1.3.82 - 修复点击"不会"时进度方块变成红色且不可更改；修复答错重新写字时第一笔写完再写第二笔第一笔被清空的问题；修复答题时提示变成全中文的问题，保持拼音提示格式；修复掌握状态的覆盖逻辑：错题可以覆盖已掌握，但已掌握不能覆盖错题（除非是复习任务）；修复重做模式下开始画第一笔时立即清除答案并恢复新题状态',
        'v1.3.81 - 修复导入同步数据时，从wordMastery中提取标记为error的条目构建错题列表',
        'v1.3.80 - 修复首页右侧点击单个汉字切换状态功能；修复未来任务仍可点击开始按钮的问题；结果页分数颜色：80以下红色，80-89黄色，90以上绿色，100分彩色渐变；深色模式下统计数据为白色',
        'v1.3.79 - 题库中的设为XX的三个按钮始终高亮可用；批量设置后立即更新学期饼图（绿、红、灰顺序）；修复任务拆分时第一个任务显示错误题目数量；复习任务未到时间时按钮置灰；首页右侧去掉标题和刷新按钮；题库批量操作工具栏固定置底',
        'v1.3.78 - 修复导入同步数据时提示"WordBank.importSyncData is not a function"的问题，添加了缺失的importSyncData方法',
        'v1.3.77 - 导入导出的展开收起操作改为点击整条bar都可以实现；导出数据只保留「导出同步数据」；导入数据只保留导入同步数据（移除下拉选择）',
        'v1.3.76 - 修复题库中点击汉字无法切换状态的问题（阻止事件冒泡到unit-row）；实现高效的导入导出数据格式，新增同步数据导出功能（包含掌握状态、错题、复习计划、任务列表）',
        'v1.3.75 - 恢复右侧待排期任务区域；去掉标题下面的紫色间距（margin-bottom: 0），但保留卡片之间的间距；移除日历视图，只保留卡片视图',
        'v1.3.74 - 真正隐藏待排期任务左侧区域（添加d-none类和!important样式）；修复「查看已完成」按钮显示已完成任务的问题，现在可以正确显示已完成任务列表；减少「未来任务」标题与卡片间距',
        'v1.3.73 - 完全隐藏待排期任务左侧区域；修复「查看已完成」按钮事件绑定问题；调整「未来任务」标题与卡片间距为mb-2',
        'v1.3.72 - 修复待排期任务重复显示问题：主列表不再显示待排期任务；去掉「复习计划」单独页面，已合并到任务清单中；修复「查看已完成」按钮功能，现在可以正确切换视图；修复iPad上日期选择器自动选择日期的问题，以及「还原」按钮无法清空日期的问题；减小「今天」和「未来任务」标题与卡片的间距',
        'v1.3.71 - 修复50题以上拆任务问题：确保任务模式下只使用任务中的wordIds，不会连续做完所有题目；添加调试模式一键做题按钮，可以自动完成N-1道题留一题；添加任务模式的详细日志以便调试',
        'v1.3.70 - 修复点击一下连跳两题的问题：添加isProcessingNextQuestion标志防止重复调用showNextQuestion；在handleNext、submitAnswer和skipAnswer的回调中正确重置状态；确保每次点击只处理一次',
        'v1.3.69 - 修复最后一题判断逻辑：在递增currentIndex之前先检查是否是最后一题，避免提前结束；添加详细的调试日志以便排查问题',
        'v1.3.68 - 修复hasContent()方法：改为通过检查paths数组来判断是否有笔迹，而不是检查像素，避免田字格背景被误判为有内容；现在只有真正绘制了笔迹才会被判定为有内容',
        'v1.3.67 - 修复点击「下一题」的逻辑：当画布没有内容时，点击下一题跟点击「不会」的效果一样，直接记录为错题并切换到下一题；如果画布上有笔迹，则提交识别；修复最后一题判断逻辑',
        'v1.3.66 - 修复点击「下一题」时调用API的问题；实现答完题后同步到题库管理的掌握状态',
        'v1.3.65 - 修复最后一题点击下一题时没有被记录到结果页；修复题库管理中设为未练习时已掌握状态无法改变',
        'v1.3.64 - 优化调试信息显示：明确提示查看控制台中的Recognition日志确认是否调用API；修复中途退出时错题保存到按轮视图；修复toast位置；数据导入导出默认收起；去掉彩色样式；从调试模式切回正常模式时也自动刷新页面',
        'v1.3.63 - 修复中途退出时错题保存：刷新页面或意外退出时，已答错的题目会自动保存到错题本；题库批量操作：支持多选单元，批量设置为未练习、已掌握、错题；调试模式开启时自动刷新页面；优化调试信息显示：在页面上显示可见的调试信息框，无需打开控制台即可查看是否调用API',
        'v1.3.62 - 恢复答题数可视化：8*8px格子显示（绿色=正确，红色=错误，灰色=未完成），数字在最后；合并倒计时和暂停/继续到一个按钮：倒计时用环形图显示，暂停/继续用图标；修复空画布点击下一题不应该触发识别的问题，添加日志确认；最后一题点击下一题直接跳结果页，不提示',
        'v1.3.61 - 添加诊断功能：新增诊断按钮和模态框，显示按钮状态、事件监听器、练习状态等详细信息；修复时间戳显示为北京时间；增强iPad触摸事件支持：为「下一题」「上一题」「提交」「不会」按钮添加touchstart/touchend/mousedown事件监听器，使用capture模式和stopImmediatePropagation确保事件正确触发；修复按钮状态恢复：在showNextWord中恢复提交按钮的disabled、innerHTML、pointerEvents和userSelect状态',
        'v1.3.47 - 任务清单卡片视图支持直接调整练习日期、复习任务日期区分显示，练习提示颜色适配深色模式并修复练习页空白问题；优化练习入口授权流程，保证从任务进入练习页稳定加载',
        'v1.3.46 - 答题反馈恢复为“拼音→汉字”词组展示并按对错着色；错题按轮视图仅展示完成练习，去除重复空轮并支持右上角红框快速纠错；错题快照始终使用当轮笔迹；汇总视图默认按最新排序、汉字加大改用楷体且移除拼音列与“只显示错题”开关；修复partial日志导致的重复轮次',
        'v1.3.45 - 题目去重：练习时自动去除重复题目；答案格式统一：统一为"✓/✗ + 全中文"格式，固定行高避免布局跳动；田字框尺寸优化：减小尺寸更适合小孩书写（350px/300px）；容错机制：检测连续提交拦截，自动清除限制，跳过按钮绕过限制，确保答题流程顺畅',
        'v1.3.44 - 练习范围恢复折叠交互且勾选不会触发展开；错题本支持弹窗设置题量/时间/模式并直接进入练习',
        'v1.3.43 - 首页新增「刷新默认题库」按钮，一键清空旧版本并重新导入1-6年级写字表；清除练习范围缓存避免只显示部分学期；保留用户自定义题库',
        'v1.3.42 - 自动导入默认题库后自动刷新练习范围，展示加载状态；修复题库空白问题并保留单元标签/排序信息；清理旧版重复代码',
        'v1.3.41 - 内置题库升级：自动挂载1-6年级写字表、按年级折叠、记住用户选择；参考语文-识字的练习范围交互；移除多余字段使JSON更简洁',
        'v1.3.40 - 内置题库升级：默认自动挂载data/wordbank/三年级上册.json，并根据版本自动更新，保留用户自定义题库；支持标记内置词条区分用户词条',
        'v1.3.39 - 结果页错题卡片恢复可交互的红框复选样式，可点击切换对错状态',
        'v1.3.38 - 修复字体缓存机制（优先从缓存加载，避免每次下载）；恢复结果页错题卡片红框样式（移除checkbox）；修复「复习错题」功能（使用localStorage传递错题ID，确保只复习当前轮错题）；移除首页题目数量快捷按钮的focus调用（避免iPad弹出键盘）',
        'v1.3.37 - 修复结果页错题卡片checkbox样式重叠问题；修复「复习错题」按钮功能（只复习当前轮的错题）；修复首页题目数量快捷按钮点击无效问题',
        'v1.3.36 - 修复田字格正确答案颜色为红色；增加字体调试信息定位问题；清理无关调试信息',
        'v1.3.35 - 修复提交间隔判断：按字ID独立计算10秒间隔，切换字时允许立即提交；修复楷体显示：田字格正确答案和错题卡片使用CSS变量楷体字体栈',
        'v1.3.34 - 优化用户体验：提交按钮添加loading状态和10秒防重复提交；首页点击开始练习直接跳到做题页；添加「不会」按钮节省API调用；答对/答错时显示绿色对钩/红色叉；修复iPad楷体显示',
        'v1.3.33 - 修复日志输出：将所有console.log中的对象输出改为JSON.stringify，避免显示[object Object]',
        'v1.3.32 - 改进错误提示：针对百度API常见错误码（特别是错误码17：每日请求限制）提供友好的中文提示和解决方案',
        'v1.3.31 - 增强调试信息：添加详细的console日志输出，支持浏览器MCP工具自查；Vercel代理函数添加完整调试日志；新增Recognition.diagnose()诊断函数',
        'v1.3.30 - 改进代理自动配置：GitHub Pages环境下自动配置并验证代理地址，识别时如果未配置会自动设置默认代理',
        'v1.3.29 - 改进识别错误提示：当Vercel代理无法连接时，提供更详细的错误信息和解决方案',
        'v1.3.28 - 优化反馈显示：错误/正确时将正确的字代入拼音显示中（红字/绿字），移除红框反馈区域，田字格上移；拼音显示使用系统默认字体，改用半角逗号分隔',
        'v1.3.27 - 解决浏览器缓存问题：在词库和词组数据加载时添加版本号参数，确保更新后立即生效；修复调试面板自动弹出问题；添加iPad楷体字体加载支持',
        'v1.3.26 - 修复[object Object]显示问题：完善pinyin-pro返回结果处理，确保所有返回值都是字符串；补充"摆"和"动"的词组数据；增强类型检查和错误处理；修复拼音声调显示（toneType改为symbol）',
        'v1.3.25 - 修复拼音显示问题：添加pinyin-pro库，当wordbank中拼音为空时自动生成拼音并替换到词组中；补充"处"和"奇"的词组数据',
        'v1.3.24 - 词组库改为外挂式：从外部JSON文件加载，支持动态更新；为三年级上册250个字生成完整词组数据（每个字4个词组）',
        'v1.3.23 - 首页对齐参考：练习范围固定高度+滚动；新增"只练错题"开关；整行点击切换单元选择；题目数量新增快捷按钮且与练习范围联动；版本号自动显示',
        'v1.3.22 - 超时/下一题自动提交并识别；首页改为左右分栏（设置 | 练习范围），学习统计移至页面底部',
        'v1.3.21 - 结果页优先显示本次快照；超时自动保存快照；定制复选框显示❌；确认修改按钮；统计数据合并一行',
        'v1.3.20 - 笔画撤销；上一题/下一题移至田字格左右；首页题目数量输入简化；结果页可手动修改对错',
        'v1.3.19 - 结果页沿用错题卡片；新增暂停；错题只看错题开关；新增纸质模式入口',
        'v1.3.18 - 自动保存未完成练习：题目答到哪就保存到草稿；刷新/断开后自动入库为 partial',
        'v1.3.17 - 错误反馈简化为红色单字；结果页深色模式配色修正',
        'v1.3.16 - 调试模式数据入库并标记；默认视图在非调试状态下过滤',
        'v1.3.15 - 新增调试模式开关：显示调试面板且不记录数据',
        'v1.3.14 - 离开练习自动保存本轮（partial）；压缩顶部与反馈间距；滚动/尺寸变化不清空笔迹',
        'v1.3.13 - 反馈移到田字格上方；练习头部与内容整体上移；正确答案字体回退：楷体→宋体→黑体',
        'v1.3.12 - 练习页画布水平居中；以固定田字格尺寸，画布缩放至95%占比；记忆练习设置；错题汇总支持排序与显示单元；移除首页重复统计；提速图片生成',
        'v1.3.11 - 错题本按轮显示所有题（含正确✅/错误❌与快照），移除手写外层div，笔迹加粗x2',
        'v1.3.10 - 错题本：按轮折叠（默认最近五轮展开）、卡片标记❌、汇总视图展示所有错题笔迹；田字格尺寸进一步缩小到60%',
        'v1.3.9 - 去除田字格周围留白：外框填满画布（仅保留2px安全边距）',
        'v1.3.8 - 提示改为拼音填充（feng叶等）；写字页按钮上移与 iPad 适配；错题按轮卡片对比视图与批量工具栏',
        'v1.3.7 - 错题本新增按轮/汇总视图与批量操作；阈值更严格；田字格边界对齐',
        'v1.3.6 - 修复田字格绘制（外边框改为虚线增强对比度），识别阈值调回正常值0.6',
        'v1.3.5 - 去掉田字格外边框，增强内部虚线对比度；深色模式使用反转滤镜（白字+深色背景→白底黑字）',
        'v1.3.4 - 修复深色模式图片显示（确保白底黑字），田字格缩小到70%，调试面板支持图片历史切换',
        'v1.3.3 - 修复深色模式文字识别：深色模式下正确识别白色文字，避免被误判为白色背景',
        'v1.3.2 - 修复iPad裁剪问题：修正canvas尺寸计算（使用实际像素尺寸），放宽网格识别阈值，确保完整文字区域',
        'v1.3.1 - 修复深色模式：分离显示和提交逻辑，提交时统一为白底黑字，排除田字格，深色模式白字正确反转',
        'v1.3.0 - 修复图片预处理：修正二值化逻辑（避免全黑图片），限制最大尺寸400px，改进文字区域检测',
        'v1.2.9 - 改进图片预处理：添加二值化和文字区域裁剪（参考其他成功案例），提高识别准确率',
        'v1.2.8 - 添加查看发送图片功能，修复田字格padding（仅2px边界），答题数量/计时器移除背景色，正确答案使用楷体并撑满田字格',
        'v1.2.7 - 修复识别：简化图片预处理（避免过度处理），加粗笔迹(5px)，田字格缩小到75%，移除导航栏「开始练习」，提交后正确答案显示在田字格中',
        'v1.2.6 - 修复识别问题：Vercel代理与本地代理参数一致（仅access_token+image），移除可能干扰的额外参数；首页移除大标题；田字格缩小到90%，padding改为2px',
        'v1.2.5 - 优化图片生成：放大2倍、增强对比度、去除网格干扰，提高识别准确率',
        'v1.2.4 - 添加完整API响应日志和图片数据检查，增强Vercel函数错误处理',
        'v1.2.3 - 临时降低识别阈值到0.1/0.05用于测试，添加详细API响应日志',
        'v1.2.2 - 修复：使用Vercel代理时跳过前端token获取（服务端已处理）',
        'v1.2.1 - 添加调试面板一键复制功能，增强识别错误日志',
        'v1.2.0 - 增强调试面板，添加详细错误日志',
        'v1.1.0 - 自动配置Vercel代理，添加识别服务配置UI',
        'v1.0.0 - 初始版本'
    ]
};

