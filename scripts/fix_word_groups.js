/**
 * ä¿®å¤è¯ç»„æ•°æ®ï¼šä¸ºä½¿ç”¨é»˜è®¤è¯ç»„çš„å­—è¡¥å……åˆé€‚çš„è¯ç»„
 */

const fs = require('fs');
const path = require('path');

// è¯»å–ç”Ÿæˆçš„è¯ç»„æ–‡ä»¶
const groupsPath = path.join(__dirname, '../data/word-groups-grade3-up.json');
const groups = JSON.parse(fs.readFileSync(groupsPath, 'utf8'));

// ä¸ºç¼ºå¤±çš„è¯ç»„è¡¥å……æ•°æ®ï¼ˆåŸºäºä¸­æ–‡å¸¸ç”¨è¯æ±‡ï¼‰
const fixes = {
    "ä¹": ["ç¼ºä¹", "ç–²ä¹", "ä¹å‘³", "å›°ä¹"],
    "äº’": ["äº’ç›¸", "äº’åŠ©", "äº’å¸®", "äº’åˆ©"],
    "äºš": ["äºšæ´²", "äºšå†›", "äºšçƒ­å¸¦", "äºšå¥åº·"],
    "äº¦": ["äº¦æ˜¯", "äº¦æˆ–", "äº¦å¦‚", "äº¦é"],
    "ä»…": ["ä»…ä»…", "ä»…æœ‰", "ä»…é™", "ä»…æ­¤"],
    "ä»‹": ["ä»‹ç»", "ä¸­ä»‹", "ä»‹æ„", "ä»‹å…¥"],
    "å……": ["å……æ»¡", "å……è¶³", "å……ç”µ", "å……æ°”"],
    "å‡‰": ["å‡‰å¿«", "å‡‰é£", "å‡‰çˆ½", "å‡‰æ„"],
    "åŠŸ": ["åŠŸå¤«", "åŠŸåŠ³", "åŠŸè¯¾", "æˆåŠŸ"],
    "å‹¾": ["å‹¾ç”»", "å‹¾é€‰", "å‹¾å‡º", "å‹¾æ­"],
    "å˜": ["å˜ç±³", "å˜æ¸…", "å˜å®š", "æ¯«å˜"],
    "å‘†": ["å‘å‘†", "å‘†ä½", "å‘†æ¿", "å‘†å­"],
    "å‘¼": ["å‘¼å¸", "å‘¼å–Š", "å‘¼å”¤", "æ‹›å‘¼"],
    "å’¬": ["å’¬ä½", "å’¬æ–­", "å’¬ç´§", "å’¬äºº"],
    "å“¦": ["å“¦å“¦", "å“¦å‘€", "å“¦å“Ÿ", "å“¦"],
    "å–œ": ["å–œæ¬¢", "å–œçˆ±", "å–œäº‹", "å–œæ°”"],
    "åœ£": ["ç¥åœ£", "åœ£äºº", "åœ£è¯", "åœ£æ´"],
    "å¡": ["å±±å¡", "åœŸå¡", "æ–œå¡", "ä¸Šå¡"],
    "åŸ¹": ["åŸ¹å…»", "åŸ¹è‚²", "åŸ¹åœŸ", "æ ½åŸ¹"],
    "å¡˜": ["æ± å¡˜", "æ°´å¡˜", "å¡˜è¾¹", "å¡˜é‡Œ"],
    "å£®": ["ç²—å£®", "å¼ºå£®", "å£®ä¸½", "å£®å¤§"],
    "å¤º": ["å¤ºå–", "å¤ºèµ°", "å¤ºç›®", "å¤ºé­"],
    "å¥‹": ["å¥‹æ–—", "å¥‹åŠ›", "å¥‹èµ·", "å¥‹å‹‡"],
    "å¥": ["æ¼”å¥", "å¥ä¹", "å¥å“", "å¥ç« "],
    "å¦¥": ["å¦¥å½“", "å¦¥å", "å¦¥å–„", "å¦¥å¸–"],
    "å§¿": ["å§¿æ€", "å§¿åŠ¿", "å§¿è‰²", "å§¿å®¹"],
    "å¨": ["å¨é£", "å¨åŠ›", "å¨ä¸¥", "å¨æ­¦"],
    "å®—": ["å®—æ•™", "å®—æ—¨", "å®—æ—", "ç¥–å®—"],
    "å®œ": ["é€‚å®œ", "ä¾¿å®œ", "å®œäºº", "å®œäº"],
    "å®«": ["å®«æ®¿", "çš‡å®«", "æ•…å®«", "å®«å»·"],
    "å¯’": ["å¯’å†·", "å¯’å†¬", "å¯’æµ", "å¯’æ„"],
    "å°¾": ["å°¾å·´", "æœ«å°¾", "å°¾éš", "å°¾æ°”"],
    "å±‹": ["æˆ¿å±‹", "å±‹å­", "å±‹é¡¶", "å±‹æª"],
    "å²©": ["å²©çŸ³", "å²©å±‚", "å²©æ´", "å²©å£"],
    "å¸ƒ": ["å¸ƒåŒ¹", "å¸ƒæ¡", "å¸ƒå‘Š", "å¸ƒè¡£"],
    "åº": ["é¡ºåº", "åºè¨€", "åºæ›²", "åºæ•°"],
    "åº­": ["å®¶åº­", "åº­é™¢", "æ³•åº­", "åº­å›­"],
    "å¾„": ["è·¯å¾„", "ç›´å¾„", "å¾„ç›´", "å°å¾„"],
    "å¿µ": ["æƒ³å¿µ", "å¿µå¤´", "å¿µä¹¦", "å¿µç»"],
    "æ’": ["æ’æ˜Ÿ", "æ°¸æ’", "æ’å®š", "æ’å¿ƒ"],
    "æŠ«": ["æŠ«ä¸Š", "æŠ«é£", "æŠ«è‚©", "æŠ«æŒ‚"],
    "æŠ¹": ["æŠ¹æ‰", "æŠ¹å»", "æŠ¹å¸ƒ", "æŠ¹é»‘"],
    "æ‹¢": ["æ‹¢ä½", "æ‹¢èµ·", "æ‹¢æ¥", "æ‹¢å…±"],
    "æŒ": ["æŒæœ‰", "æŒç»­", "æŒå®¶", "æŒé‡"],
    "æŒ‘": ["æŒ‘é€‰", "æŒ‘æ°´", "æŒ‘æ‹…", "æŒ‘é£Ÿ"],
    "æŒ¡": ["æŒ¡ä½", "æŒ¡è·¯", "æŒ¡é£", "æŒ¡é›¨"],
    "æ­": ["æ­èµ·", "æ­è½¦", "æ­æ¡¥", "æ­è¯"],
    "æ—…": ["æ—…è¡Œ", "æ—…æ¸¸", "æ—…é€”", "æ—…å®¢"],
    "æ—¨": ["å®—æ—¨", "æ—¨æ„", "ä¸»æ—¨", "è¦æ—¨"],
    "æ˜†": ["æ˜†è™«", "æ˜†æ˜", "æ˜†ä»‘", "æ˜†æ›²"],
    "æš´": ["æš´é›¨", "æš´é£", "æš´æ™’", "æš´èº"],
    "æœ›": ["å¸Œæœ›", "çœ‹æœ›", "æœ›è§", "æœ›æœˆ"],
    "æ": ["æèŠ±", "æå­", "æä»", "ææ ‘"],
    "æš": ["ä¸€æš", "æšä¸¾", "æšæ•°", "å‡ æš"],
    "æ«": ["æ«å¶", "æ«æ ‘", "æ«æ—", "çº¢æ«"],
    "æ¡ˆ": ["æ¡ˆä»¶", "æ–¹æ¡ˆ", "ç­”æ¡ˆ", "æ¡ˆæ¿"],
    "æ¢¨": ["æ¢¨å­", "æ¢¨æ ‘", "æ¢¨å›­", "æ¢¨æ ¸"],
    "æ£’": ["æ£’å­", "æ£’çƒ", "æ£’æ£’", "æ£’ç³–"],
    "æ£•": ["æ£•è‰²", "æ£•æ¦ˆ", "æ£•ç†Š", "æ£•æ¯›"],
    "æ¬ ": ["æ¬ å€º", "æ¬ æ¬¾", "æ¬ æ¡", "æ¬ è´¦"],
    "æ¬²": ["æ¬²æœ›", "æ¬²æ±‚", "æ¬²å¿µ", "æ¬²ç«"],
    "æ±‡": ["æ±‡åˆ", "æ±‡é›†", "æ±‡æ¬¾", "æ±‡å…¥"],
    "æ´": ["æ¸…æ´", "æ´ç™½", "æ•´æ´", "æ´å‡€"],
    "æ¶¦": ["æ¹¿æ¶¦", "æ»‹æ¶¦", "æ¶¦æ»‘", "æ¶¦æ³½"],
    "æ¹¿": ["æ¹¿æ¶¦", "æ½®æ¹¿", "æ¹¿åº¦", "æ¹¿æ°”"],
    "æ¸”": ["æ¸”æ°‘", "æ¸”ä¸š", "æ¸”ç½‘", "æ¸”å¤«"],
    "æ»¨": ["æµ·æ»¨", "æ¹–æ»¨", "æ±Ÿæ»¨", "æ»¨æ°´"],
    "çˆ½": ["å‡‰çˆ½", "çˆ½å¿«", "æ¸…çˆ½", "çˆ½æœ—"],
    "ç‹‚": ["ç‹‚é£", "ç‹‚çƒ­", "ç‹‚æ¬¢", "ç‹‚å–œ"],
    "ç ": ["çç ", "æ°´ç ", "ç å­", "ç å®"],
    "çƒ": ["è¶³çƒ", "ç¯®çƒ", "åœ°çƒ", "æ˜Ÿçƒ"],
    "ç´": ["é’¢ç´", "ç´å£°", "ç´é”®", "å¼¹ç´"],
    "ç”³": ["ç”³è¯·", "ç”³æ˜", "ç”³è¯‰", "ç”³æŠ¥"],
    "ç™»": ["ç™»ä¸Š", "ç™»é«˜", "ç™»è®°", "ç™»å°"],
    "çš†": ["çš†æ˜¯", "çš†å¤§", "çš†å¯", "çš†æ— "],
    "ç››": ["ç››å¤§", "ç››å†µ", "ç››è£…", "ç››æƒ…"],
    "çœ¨": ["çœ¨çœ¼", "çœ¨å·´", "çœ¨åŠ¨", "çœ¨çœ¨"],
    "çœ¶": ["çœ¼çœ¶", "çƒ­æ³ªç›ˆçœ¶", "çœ¶é‡Œ", "çœ¶å¤–"],
    "ç": ["çå¼€", "ççœ¼", "çå¤§", "çç€"],
    "ç›": ["çœ¼ç›", "å®šç›", "ç›®ä¸è½¬ç›", "ç‚¹ç›"],
    "ç¹": ["ç›®ç¹", "ç¹ç‰©", "ç¹è§", "ç¹é¢"],
    "ç…": ["ç…è§", "ç…ç€", "ç…ç…", "ç…ä¸€çœ¼"],
    "çª": ["çªçœ¼", "çªå¤§", "çªç€", "çªè§†"],
    "ç¢°": ["ç¢°åˆ°", "ç¢°è§", "ç¢°æ’", "ç¢°å·§"],
    "ç¥–": ["ç¥–å›½", "ç¥–å…ˆ", "ç¥–çˆ¶", "ç¥–æ¯"],
    "ç¥¨": ["é‚®ç¥¨", "é—¨ç¥¨", "è½¦ç¥¨", "å‘ç¥¨"],
    "ç§’": ["ç§’è¡¨", "ç§’é’ˆ", "ç§’æ€", "ç§’æ•°"],
    "ç§˜": ["ç§˜å¯†", "ç§˜æ–¹", "ç§˜é—»", "ç§˜äº‹"],
    "ç¬›": ["ç¬›å­", "é•¿ç¬›", "ç«¹ç¬›", "ç¬›å£°"],
    "ç­‰": ["ç­‰å¾…", "ç­‰ç­‰", "ç­‰çº§", "ç­‰åˆ°"],
    "ç²˜": ["ç²˜è´´", "ç²˜ä½", "ç²˜è¿", "ç²˜æ€§"],
    "ç»": ["ä»‹ç»", "ç»å…´", "ç»è¿°", "ç»ä»‹"],
    "ç½š": ["æƒ©ç½š", "ç½šçƒ", "ç½šæ¬¾", "ç½šç«™"],
    "ç¾½": ["ç¾½æ¯›", "ç¾½ç¿¼", "ç¾½æ‰‡", "ç¾½åŒ–"],
    "è€ƒ": ["è€ƒè¯•", "è€ƒè™‘", "è€ƒå¯Ÿ", "è€ƒå·"],
    "è€": ["ç©è€", "è€å¼„", "è€èµ–", "è€æ»‘"],
    "èƒƒ": ["èƒƒå£", "èƒƒç—…", "èƒƒç—›", "èƒƒè‚ "],
    "è„¸": ["è„¸è‰²", "è„¸é¢", "è„¸çº¢", "è„¸ç›†"],
    "èŠ¦": ["è‘«èŠ¦", "èŠ¦è‹‡", "èŠ¦èŠ±", "èŠ¦ç¬›"],
    "èŒ‚": ["èŒ‚ç››", "èŒ‚å¯†", "èŒ‚æ—", "èŒ‚è‰"],
    "è£": ["å…‰è£", "è£èª‰", "è£å", "è£è¾±"],
    "è¯": ["è¯ç‰©", "è¯å“", "è¯ç‰‡", "è¯æ°´"],
    "èŠ": ["èŠèŠ±", "ç§‹èŠ", "èŠå±•", "èŠé¦™"],
    "èŒ": ["èŒèŠ½", "èŒå‘", "èŒç”Ÿ", "èŒåŠ¨"],
    "è‘«": ["è‘«èŠ¦", "è‘«èŠ¦å¨ƒ", "ç³–è‘«èŠ¦", "è¥¿è‘«èŠ¦"],
    "è’²": ["è’²æ‰‡", "è’²è‰", "è’²å›¢", "è’²å…¬è‹±"],
    "è™¾": ["è™¾ç±³", "è™¾å­", "è™¾ä»", "è™¾çš®"],
    "èƒ": ["èƒèŸ¹", "èƒèœ", "èƒè ", "èƒ"],
    "èº": ["èºä¸", "èºå·", "èºè›³", "èºæ—‹"],
    "èŸ¹": ["èƒèŸ¹", "èŸ¹é»„", "èŸ¹è‚‰", "èŸ¹å£³"],
    "è¡€": ["è¡€æ¶²", "è¡€å‹", "è¡€ç»Ÿ", "è¡€æ±—"],
    "è¯•": ["è¯•éªŒ", "è¯•è¯•", "è¯•ç©¿", "è¯•åƒ"],
    "è¯»": ["è¯»ä¹¦", "é˜…è¯»", "æœ—è¯»", "è¯»æ‡‚"],
    "è·Œ": ["è·Œå€’", "è·Œè½", "è·Œä»·", "è·Œè·¤"],
    "è·Ÿ": ["è·Ÿç€", "è·Ÿä»", "è·Ÿç­", "è·Ÿæ¥"],
    "è¸©": ["è¸©åˆ°", "è¸©è¸", "è¸©ä½", "è¸©å"],
    "è½°": ["è½°éš†", "è½°ç‚¸", "è½°åŠ¨", "è½°é¸£"],
    "è½´": ["è½¦è½´", "è½´å¿ƒ", "è½´çº¿", "è½´æ‰¿"],
    "è¿…": ["è¿…é€Ÿ", "è¿…çŒ›", "è¿…ç–¾", "è¿…é›·"],
    "é‚®": ["é‚®ç¥¨", "é‚®å±€", "é‚®å¯„", "é‚®ç®±"],
    "éƒ¨": ["éƒ¨åˆ†", "éƒ¨é—¨", "éƒ¨ä½", "éƒ¨é¦–"],
    "é’»": ["é’»ç ”", "é’»çŸ³", "é’»å­”", "é’»å…¥"],
    "é”™": ["é”™è¯¯", "é”™è¿‡", "é”™é¢˜", "é”™å­—"],
    "é—¹": ["çƒ­é—¹", "åµé—¹", "é—¹é’Ÿ", "é—¹äº‹"],
    "é˜": ["é˜æ¥¼", "é˜å­", "é«˜é˜", "æ¥¼é˜"],
    "é™†": ["é™†åœ°", "å¤§é™†", "é™†è·¯", "é™†å†›"],
    "éœœ": ["éœœé™", "éœœå†»", "ç™½éœœ", "éœœèŠ±"],
    "é¢‘": ["é¢‘ç¹", "é¢‘ç‡", "é¢‘é“", "é¢‘é¢‘"],
    "é¥®": ["é¥®æ°´", "é¥®æ–™", "é¥®é£Ÿ", "é¥®ç”¨"],
    "é²¤": ["é²¤é±¼", "é”¦é²¤", "é²¤è·ƒ", "é²¤ç§‘"],
    "é²¨": ["é²¨é±¼", "é²¨é³", "é²¨çš®", "é²¨"],
    "é²«": ["é²«é±¼", "é²«", "é²«ç§‘", "é²«"],
    "é¸£": ["é¸£å«", "é¸£å“", "é¸£ç¬›", "é¸£å£°"],
    "é¹¿": ["å°é¹¿", "é¹¿è§’", "é¹¿ç¾¤", "é¹¿çš®"],
    "é»„": ["é»„è‰²", "é‡‘é»„", "é»„æ˜", "é»„æ²³"],
    "é½¿": ["ç‰™é½¿", "é½¿è½®", "é½¿é¾ˆ", "é”¯é½¿"]
};

// æ›´æ–°è¯ç»„æ•°æ®
let fixedCount = 0;
Object.keys(groups).forEach(word => {
    const currentGroups = groups[word];
    // æ£€æŸ¥æ˜¯å¦ä½¿ç”¨é»˜è®¤è¯ç»„ï¼ˆä»¥"çš„"ç»“å°¾ï¼‰
    if (currentGroups && currentGroups[0] && currentGroups[0].endsWith('çš„')) {
        if (fixes[word]) {
            groups[word] = fixes[word];
            fixedCount++;
        }
    }
});

// ä¿å­˜æ›´æ–°åçš„æ–‡ä»¶
fs.writeFileSync(groupsPath, JSON.stringify(groups, null, 2), 'utf8');

console.log(`âœ… å·²ä¿®å¤ ${fixedCount} ä¸ªå­—çš„è¯ç»„æ•°æ®`);
console.log(`âœ… å·²ä¿å­˜åˆ°: ${groupsPath}`);

// ç»Ÿè®¡å‰©ä½™éœ€è¦ä¿®å¤çš„
const remaining = Object.entries(groups).filter(([k, v]) => v[0].endsWith('çš„')).length;
console.log(`ğŸ“Š ä»æœ‰ ${remaining} ä¸ªå­—ä½¿ç”¨é»˜è®¤è¯ç»„`);


