# 项目结构规划

## 文件组织

```
看拼音写词/
├── index.html                 # 主页面（首页/练习/结果）
├── css/
│   └── styles.css            # Bootstrap + 自定义样式
├── js/
│   ├── main.js               # 主入口，路由管理
│   ├── handwriting.js        # Canvas手写输入处理
│   ├── recognition.js        # 手写识别API调用
│   ├── wordbank.js           # 题库管理（导入/导出/搜索）
│   ├── practice.js           # 练习逻辑（题目显示/计时/流程）
│   ├── statistics.js         # 统计计算和展示
│   ├── errorbook.js          # 错题本管理
│   └── storage.js            # 数据存储（LocalStorage封装）
├── upload/                    # PDF上传目录
├── data/                      # 提取的题库数据（JSON）
├── extract_pdf.py            # PDF提取工具（Python）
├── requirements.txt          # Python依赖
├── README.md                 # 项目说明
├── 需求文档.md
└── rules-draft.md
```

## 技术栈

- **前端**：原生 JavaScript + Bootstrap 5
- **手写输入**：HTML5 Canvas API
- **识别API**：第三方手写识别（百度/腾讯/讯飞）
- **数据存储**：LocalStorage
- **PDF处理**：Python + pdfplumber（独立工具）

## 页面结构

### 单页面应用（SPA）
- 使用单页面，通过显示/隐藏不同section实现页面切换
- 页面模块：
  1. **首页** (`section#home`)
  2. **练习页面** (`section#practice`)
  3. **结果页面** (`section#results`)
  4. **错题本页面** (`section#errorbook`)
  5. **题库管理页面** (`section#wordbank`)

## 数据模型

### 题库数据结构
```javascript
{
  wordBank: [
    {
      id: "word_001",
      word: "人",
      pinyin: "rén",
      grade: 3,
      semester: "上",
      unit: 1,
      addedDate: "2024-01-15"
    }
  ]
}
```

### 练习记录
```javascript
{
  practiceLogs: [
    {
      id: "log_001",
      date: "2024-01-15T10:00:00Z",
      totalWords: 20,
      correctCount: 18,
      errorCount: 2,
      totalTime: 600,
      averageTime: 30,
      errorWords: ["word_005", "word_012"]
    }
  ]
}
```

### 错题记录（含快照）
```javascript
{
  errorWords: [
    {
      wordId: "word_005",
      word: "大",
      pinyin: "dà",
      firstErrorDate: "2024-01-10T10:00:00Z",
      lastErrorDate: "2024-01-15T09:30:00Z",
      errorCount: 3,
      handwritingSnapshots: [
        {
          practiceId: "log_001",
          snapshot: "data:image/png;base64,...",
          date: "2024-01-15T09:30:00Z"
        }
      ]
    }
  ]
}
```

## 开发顺序

1. ✅ 项目结构搭建
2. Canvas手写输入基础功能
3. 题库数据结构定义和存储
4. 练习流程（显示题目→输入→校验）
5. 识别API集成
6. 错题记录和快照
7. 结果页面和统计
8. 错题本功能
9. 导出导入功能
10. PDF提取工具优化
11. 响应式优化

## 第三方API选择

### 手写识别API备选
1. **百度AI开放平台**
   - API: https://ai.baidu.com/tech/ocr/handwriting
   - 优点: 中文识别好，文档完善
   - 缺点: 需要注册，有调用限制

2. **腾讯云OCR**
   - API: 手写体识别
   - 优点: 稳定
   - 缺点: 需要企业认证

3. **讯飞开放平台**
   - API: 手写识别
   - 优点: 准确率高
   - 缺点: 需要注册

**建议**：先用百度AI，文档清晰，个人开发者可用。
