# 看拼音写词 - 项目需求文档

## 项目概述
一个帮助小学生通过手写练习掌握生词的网页应用，实现**测试→校对→学习→测试**的自主学习闭环。

## 核心功能需求

### 1. 手写输入功能
- ✅ 支持iPad手写笔和电脑鼠标输入
- ✅ Canvas绘制笔迹，实时显示
- ✅ 支持清除重写
- ✅ 支持撤销最后一笔
- ✅ 响应式设计，适配不同屏幕

### 2. 书写校验功能
- ✅ 使用百度AI手写识别API
- ✅ 设置置信度阈值（默认0.6，可配置）
- ✅ 记录书写快照（Base64图片）
- ✅ 错题展示时并排对比：孩子写的字 vs 标准答案

### 3. 练习流程
- ✅ 开始练习 → 显示拼音 → 手写输入 → 自动校验
- ✅ 正确：立即提示，进入下一题
- ✅ 错误：显示正确答案，记录错题
- ✅ 超时自动保存快照并记录为错题
- ✅ 支持暂停/继续功能
- ✅ 支持纸质书写模式（不判题，仅出题）

### 4. 练习设置
- ✅ 题目数量：可输入或从下拉选择（10/20/50/全部）
- ✅ 时间限制：每个字N秒（可配置，默认30秒）
- ✅ 练习范围：按年级/学期/单元选择
- ✅ 错题集一键练习
- ✅ 设置自动记忆保存

### 5. 错题本功能
- ✅ 自动记录写错的字
- ✅ 记录错误次数、首次错误时间、最近错误时间
- ✅ 保存所有书写快照
- ✅ 按轮视图：显示每轮练习的所有题目（含正确/错误状态）
- ✅ 汇总视图：统计所有错题，按错误次数/时间/单元排序
- ✅ 只显示错题开关
- ✅ 批量操作（管理模式）：批量设为已掌握/错题、删除

### 6. 练习统计
- ✅ 总题数、正确数、错误数、正确率
- ✅ 总用时、平均每字用时
- ✅ 结果页可手动修改对错状态（定制复选框显示❌）
- ✅ 确认修改按钮（有修改时启用）
- ✅ 统计数据合并一行显示

### 7. 题库管理
- ✅ PDF教材提取工具（Python + pdfplumber）
- ✅ 手动导入JSON格式题库
- ✅ 批量导入生词
- ✅ 分类管理（年级/学期/单元）
- ✅ 搜索和筛选
- ✅ 数据导出/导入（JSON格式）

### 8. 数据存储
- ✅ 使用LocalStorage存储所有数据
- ✅ 数据结构：题库、练习记录、错题本、设置
- ✅ 自动保存未完成练习（partial状态）
- ✅ 刷新/断开后自动入库为partial记录

### 9. 用户界面
- ✅ 导航栏：版本号、调试模式开关、主题切换
- ✅ 首页：练习设置、统计展示
- ✅ 练习页：拼音显示、田字格手写区、上一题/下一题按钮（左右两侧）
- ✅ 结果页：统计卡片、错题列表、操作按钮
- ✅ 错题本页：按轮/汇总视图、批量操作
- ✅ 题库管理页：导入导出、配置管理
- ✅ 深色模式支持

### 10. 调试功能
- ✅ 调试面板：环境信息、代理配置、实时日志
- ✅ 调试模式开关：显示调试面板，数据标记isDebug
- ✅ 非调试模式下自动过滤调试数据
- ✅ 图片历史查看（上一张/下一张）
- ✅ 一键复制所有日志

## 技术实现

### 前端技术栈
- HTML5 + CSS3 + JavaScript（原生）
- Bootstrap 5（UI框架）
- Canvas API（手写输入）

### 后端/API
- 百度AI手写识别API
- Vercel Serverless Function（代理服务器）

### 数据存储
- LocalStorage（浏览器本地存储）

### 开发工具
- Python 3.x（PDF提取）
- pdfplumber（PDF解析）

## 部署
- GitHub Pages（静态托管）
- Vercel（Serverless Function代理）

## 版本历史
当前版本：v1.3.21
详见 js/version.js 中的 changelog

## 待实现功能（Phase 2）
- 遗忘曲线复习系统
- 笔画顺序动画演示
- 学习模式（描红练习）
- 详细统计图表
- 多用户支持
